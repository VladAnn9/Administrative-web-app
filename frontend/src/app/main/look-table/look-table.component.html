<div class="row ">
    <div class="col-12">
      <p class="text-center">
        PrzeglÄ…daj dokumenty {{typeOfDoc}}.
      </p>
    </div>
</div>
<div class="row">
  <div class="col-12">
    <div class="spinner-container" *ngIf="dataSourceLookTable.loading$ | async">
        <mat-spinner></mat-spinner>
    </div>
    
    <div class="wrapper mat-elevation-z8">
      <table
        mat-table
        [dataSource]="dataSourceLookTable"
        matSort
        matSortActive="id"
        matSortDirection="desc"
        matSortDisableClear
      >
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
          <td mat-cell *matCellDef="let row" [routerLink]="['../../details', row.id]">{{ row.id }}</td>
        </ng-container>
      
        <ng-container matColumnDef="data">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Data</th>
          <td mat-cell *matCellDef="let row" [routerLink]="['../../details', row.id]">
            {{ row.data | date: 'yy/M/d' }}
          </td>
        </ng-container>
      
        <ng-container matColumnDef="lokal">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Lokal</th>
          <td mat-cell *matCellDef="let row" [routerLink]="['../../details', row.id]">{{row.lokal}}</td>
        </ng-container>
      
        <ng-container matColumnDef="status">
          <th mat-header-cell
            *matHeaderCellDef mat-sort-header
          >Status</th>
          <td mat-cell *matCellDef="let row" [routerLink]="['../../details', row.id]">{{row.status}}</td>
        </ng-container>

        <ng-container matColumnDef="akcje">
          <th mat-header-cell *matHeaderCellDef>Akcje</th>
          <td mat-cell *matCellDef="let row">
            <div *ngIf="userRole === 'root' || userRole === 'admin'; else biuroBlock">
              <button mat-icon-button color="warn" (click)="openDeleteConfirm(row)">
                <mat-icon>close</mat-icon></button>
            </div>

            <ng-template #biuroBlock>
              <button mat-icon-button [disabled]="row.status !== 'edycja' || typeOfDoc === 'WZ' || 
                userRole === 'inni'" color="warn">
                <mat-icon 
                  (click)="(row.status === 'edycja' && typeOfDoc !== 'WZ' && userRole !== 'inni') ? openDeleteConfirm(row) : ''">
                  close</mat-icon>
              </button>
            </ng-template>
          </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedLookColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedLookColumns" 
          ></tr>
      
      </table>
      <mat-paginator
      color="accent"
      [length]="resultLength"
      [pageSize]="10"
      [pageSizeOptions]="[5, 10, 25, 100]"  
      ></mat-paginator>
    </div>
  </div>
</div>
